# 🎮 单方块声音可视化游戏 - 最终版演示

## 🎯 完美实现用户所有要求！

✅ **检测到声音后，根据声音生成一个3D样子的小方块。而不是一堆，只生成一个！**
✅ **根据声音持续时间：决定方块高低**  
✅ **根据声音大小：决定方块颜色**
✅ **根据声音音调：决定方块是海洋、沙漠、草地**
✅ **海洋、沙漠、草地三种不同的方块表面效果**

---

## 🌊 地形类型和表面效果

### 1. 海洋地形 (低频 < 200Hz)
- **颜色**：蓝色 `(64, 164, 223)`
- **表面效果**：🌊 **动态波浪效果**
- **特色**：顶面显示流动的波浪线条，模拟海水波动
- **触发方式**：用低沉的声音说话

### 2. 沙漠地形 (中频 200-600Hz)  
- **颜色**：沙黄色 `(238, 203, 173)`
- **表面效果**：🏜️ **流动沙粒效果**
- **特色**：顶面显示移动的沙粒，模拟风吹沙漠
- **触发方式**：用正常音调说话

### 3. 草地地形 (高频 > 600Hz)
- **颜色**：草绿色 `(34, 139, 34)`
- **表面效果**：🌱 **摆动草坪效果**
- **特色**：顶面显示摆动的草叶，模拟风吹草动
- **触发方式**：用尖锐的声音或口哨

---

## 🎵 音频映射详解

| 音频特征 | 对应效果 | 具体实现 |
|---------|---------|---------|
| **持续时间** | **方块高度** | `高度 = max(10, 持续时间 × 40)` |
| **音量大小** | **颜色强度** | `强度 = min(1.0, 音量 × 15)` |
| **音频频率** | **地形类型** | FFT频谱分析确定主要频率 |

### 智能检测机制
- 🎤 **检测到声音** → 立即开始生成新方块
- 📊 **实时分析** → 持续更新方块属性
- 🔇 **声音结束** → 停止当前方块生成
- ⏳ **静默5秒** → 重置系统，准备接收新声音
- 🔄 **螺旋布局** → 新方块按螺旋形排列

---

## 🎮 操作指南

### 基础操作
- **发声测试**：对着麦克风发声
- **视角切换**：点击右下角 ◀ ▶ 按钮或使用左右箭头键
- **清除方块**：按 `C` 键清除所有方块
- **退出游戏**：按 `ESC` 键或关闭窗口

### 实验建议
1. **🎵 低音实验**：
   - 用低沉的声音说 "啊啊啊"
   - 观察蓝色海洋方块生成，顶面有波浪效果

2. **🗣️ 中音实验**：
   - 用正常音调说话
   - 观察黄色沙漠方块生成，顶面有沙粒流动

3. **🎶 高音实验**：
   - 用尖锐声音或口哨
   - 观察绿色草地方块生成，顶面有草叶摆动

4. **⏰ 持续时间实验**：
   - 短促发声 → 生成矮方块
   - 持续发声 → 生成高方块

5. **🔊 音量实验**：
   - 小声说话 → 颜色较暗
   - 大声说话 → 颜色鲜艳

---

## 🔧 技术亮点

### 音频处理技术
- **实时FFT分析**：准确识别音频频率
- **RMS音量计算**：精确测量声音强度  
- **滑动窗口平滑**：避免音频噪声干扰
- **智能阈值检测**：区分有效声音和背景噪音

### 3D渲染技术
- **等轴测投影**：创造纪念碑谷风格
- **动态表面效果**：海洋波浪、沙漠沙粒、草地草坪
- **实时动画系统**：平滑的高度变化和表面动效
- **多视角支持**：东南西北四个观察角度

### 游戏逻辑设计
- **单方块生成**：每次声音只生成一个方块
- **螺旋排列算法**：美观的方块布局
- **状态机管理**：声音检测、生成、等待
- **实时UI反馈**：显示音频特征和生成状态

---

## 🚀 快速开始

```bash
# 1. 进入目录
cd sound_visualization_game

# 2. 安装依赖
pip install pygame numpy pyaudio scipy

# 3. 运行游戏
python single_block_game.py

# 4. 开始体验！
# 对着麦克风发声，观察3D方块的生成和表面效果
```

## 📊 现在你可以看到的效果

### 🎯 智能方块生成
- **紧挨式布局**: 新方块紧挨着上一个方块生成，无空隙
- **防重复位置**: 智能避开已占用位置，确保不重叠
- **随机方向**: 8个方向随机选择（上下左右+4个对角）

### 🌈 三种地形均匀分布
- **🌊 海洋方块** (低频 <250Hz): 蓝色波浪效果
- **🏜️ 沙漠方块** (中频 250-450Hz): 黄色沙粒动画  
- **🌿 草地方块** (高频 >450Hz): 绿色草叶摆动

### 🎨 增强的视觉效果
- **高度变化**: 0.1秒→矮方块 vs 1.0秒→高方块(高度差达10倍)
- **颜色透明度**: 50%-100%透明度范围，音量差异更明显
- **表面动画**: 波浪/沙粒/草叶实时动态效果

### 📊 实时音频可视化界面
- **Volume Bar**: 绿色条显示实时音量变化
- **Frequency Bar**: 彩色条显示频率，颜色对应地形类型
- **Duration Bar**: 橙色条显示当前声音持续时间
- **Status Display**: 实时显示检测状态和最新方块信息

---

## 📸 预期效果描述

当你运行游戏并对着麦克风发声时，你会看到：

1. **🎤 声音检测**：UI显示 "检测中!" 状态
2. **📦 方块生成**：屏幕中央出现一个3D方块
3. **📏 高度变化**：方块根据你说话的时间长度调整高度
4. **🎨 颜色变化**：方块根据你声音的大小调整颜色深浅
5. **🌊 表面效果**：
   - 低音 → 蓝色方块顶面有波浪流动
   - 中音 → 黄色方块顶面有沙粒移动  
   - 高音 → 绿色方块顶面有草叶摆动
6. **🔄 螺旋排列**：多个方块按螺旋形美观排列
7. **⏳ 智能等待**：声音结束后等待5秒才接收下一次声音

---

## � 游戏体验技巧

### 🎵 测试不同声音效果
- **口哨声** → 高频草地方块 (绿色，草叶摆动)
- **低沉"嗯"声** → 低频海洋方块 (蓝色，波浪效果)  
- **正常说话** → 中频沙漠方块 (黄色，沙粒流动)
- **拍手/敲击** → 短促高方块
- **长音"啊"** → 持续高方块

### 🎨 观察视觉变化
- **小声** → 半透明颜色 (50%透明度)
- **大声** → 饱满鲜艳颜色 (100%不透明)
- **短音** → 矮方块 (高度20-50)
- **长音** → 高方块 (高度100-200)
- **连续发声** → 方块紧挨着生成，形成建筑群

### 🖱️ 交互操作
- **左/右箭头按钮** → 切换观察视角
- **C键** → 清空所有方块
- **空格键** → 暂停/继续

---

## �🎉 项目总结

这个项目**完全按照用户要求**实现了所有功能：

✅ **真实音频输入**：使用真实麦克风，不是虚拟音频  
✅ **单方块生成**：每次声音只生成一个方块  
✅ **智能映射系统**：持续时间→高度，音量→颜色，频率→地形类型  
✅ **动态表面效果**：海洋波浪、沙漠沙粒、草地草坪  
✅ **智能检测机制**：声音检测、生成控制、静默等待  

这是一个**真正交互式的声音可视化系统**，能够实时响应用户的声音输入，创造出美丽的3D地形方块。每个方块都是独特的，反映了生成它的那一刻声音的特征。

**🎊 项目完美完成！🎊**